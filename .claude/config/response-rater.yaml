# Response-Rater Configuration
# Controls provider selection, timeouts, and consensus strategy for plan rating

version: '1.0.0'

providers:
  # Provider tiers by workflow criticality
  standard:
    - claude
    - gemini
  enterprise:
    - claude
    - gemini
    - codex
  critical:
    - claude
    - gemini
    - codex
    - cursor
    - copilot

timeouts:
  # Timeout per individual provider (seconds)
  per_provider: 180
  # Maximum total time for all providers (seconds)
  total_max: 600
  # Connection timeout (seconds)
  connection: 30

consensus:
  # Scoring strategy: 'average', 'highest', 'lowest', 'median'
  strategy: average
  # Minimum providers that must succeed for valid rating
  min_providers: 1
  # Maximum score difference before flagging disagreement
  disagreement_threshold: 1.5

fallback:
  # What to do when all providers fail
  on_all_fail: use_cached_or_manual_review
  # Cache TTL for ratings (seconds) - 1 hour
  cache_ttl: 3600
  # Enable manual review fallback
  manual_review_enabled: true
  # Max cache age before forcing re-rating (seconds) - 24 hours
  max_cache_age: 86400

retry:
  # Retry per provider on transient failure
  per_provider_retries: 1
  # Backoff multiplier
  backoff_multiplier: 2
  # Initial delay (seconds)
  initial_delay: 5

# Workflow type to provider tier mapping
workflow_mapping:
  incident-flow: standard # Fast response needed
  quick-flow: standard
  enterprise-track: enterprise
  automated-enterprise-flow: enterprise
  legacy-modernization-flow: enterprise
  ai-system-flow: critical
  security-flow: critical
  compliance-flow: critical
  # Default for unlisted workflows
  default: standard
