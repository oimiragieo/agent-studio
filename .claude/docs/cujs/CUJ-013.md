# CUJ-013: Code Review

## User Goal
Comprehensive code review with systematic analysis.

## Trigger
- `/review`
- `/review src/components/`
- "Review this code"

## Workflow

**Execution Mode**: `skill-only`

### Step 0: Planning Phase
- Planner creates review plan
- Analyzes code scope and requirements
- Determines review depth and focus areas
- Outputs: `plan-{{workflow_id}}.md`, `plan-{{workflow_id}}.json`

### Step 1: Code Analysis
- Code Reviewer analyzes code
- Checks quality, patterns, security
- Identifies issues

### Step 2: Review Report
- Generates review report
- Lists issues with severity
- Provides recommendations

### Step 3: Fix Suggestions
- Suggests specific fixes
- Provides code examples
- Prioritizes issues

## Agents Used
- Code Reviewer

## Skills Used
- `rule-auditor` - Rule compliance

## Expected Outputs
- Code review report
- Issue list with priorities
- Fix suggestions

## Success Criteria
- [ ] Review plan created (artifact: `plan-{{workflow_id}}.json`, validated by gate file)
- [ ] Code analyzed (artifact: `code-review-report-{{workflow_id}}.json`, files_reviewed array populated)
- [ ] Issues identified with severity (artifact: `code-review-report-{{workflow_id}}.json`, issues array with severity: critical|high|medium|low)
- [ ] Rule compliance checked (artifact: `code-review-report-{{workflow_id}}.json`, rule_violations array)
- [ ] Security issues flagged (artifact: `code-review-report-{{workflow_id}}.json`, security_issues array)
- [ ] Recommendations provided (artifact: `code-review-report-{{workflow_id}}.json`, recommendations array)
- [ ] Fix suggestions with code examples (artifact: `code-review-report-{{workflow_id}}.json`, each issue has suggested_fix)
- [ ] Report validated (schema: `.claude/schemas/code-review-report.schema.json`)

## Example Prompts
```
/review
/review src/components/auth
"Review the authentication module"
```

## Related Documentation
- [Code Reviewer Agent](../../agents/code-reviewer.md)
- [rule-auditor Skill](../../skills/rule-auditor/SKILL.md)
