# CUJ-010: API Endpoint Development

## User Goal
Create a new API endpoint with proper structure.

## Trigger
- "Create /api/users endpoint"
- "Add API endpoint"
- "Generate API route"

## Workflow

**Execution Mode**: brownfield-fullstack.yaml

### Step 0: Planning Phase
- Planner creates implementation plan
- Analyzes API endpoint requirements
- Coordinates with Architect for API design patterns
- Defines request/response schemas
- Outputs: `plan-{{workflow_id}}.md`, `plan-{{workflow_id}}.json`

### Step 1: API Design
- Developer identifies endpoint requirements
- Determines HTTP methods
- Defines request/response schemas

### Step 2: Scaffolding
- scaffolder generates API route
- Creates validation schemas
- Sets up error handling

### Step 3: Implementation
- Developer implements business logic
- Adds database operations
- Implements authentication

### Step 4: API Contract Generation
- api-contract-generator creates OpenAPI/Swagger schema
- Validates contract matches implementation
- Saves contract to artifact registry

### Step 5: Documentation
- doc-generator creates API docs
- Uses OpenAPI contract for documentation
- Adds examples

## Agents Used
- Developer â†’ Technical Writer

## Skills Used
- `scaffolder` - API generation
- `api-contract-generator` - OpenAPI/Swagger schema generation
- `doc-generator` - API documentation

## Expected Outputs
- API route file
- Validation schemas
- API documentation
- OpenAPI specification

## Success Criteria
- [ ] Endpoint implemented: API route file created at `src/app/api/{{endpoint}}/route.ts` (validated by gate file: gates/step-2.json)
- [ ] Validation added: Validation schemas created and registered in artifact registry (artifact: validation-schema-{{workflow_id}}.json)
- [ ] Documentation complete: API documentation file created (artifact: api-docs-{{workflow_id}}.md, validated by schema: .claude/schemas/api-docs.schema.json)
- [ ] OpenAPI contract generated: OpenAPI specification created (artifact: openapi-{{workflow_id}}.json, validated by schema: .claude/schemas/openapi.schema.json)
- [ ] Examples provided: Usage examples included in documentation (artifact: api-docs-{{workflow_id}}.md)

## Example Prompts
```
"Create /api/users endpoint with CRUD operations"
"Generate API route for authentication"
"Add REST endpoint for orders"
```

