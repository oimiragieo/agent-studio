# CUJ-012: Feature Implementation

## User Goal
Implement a complete feature following best practices.

## Trigger
- "Implement user authentication"
- "Build [feature]"
- "Add [feature]"

## Workflow

**Execution Mode**: `greenfield-fullstack.yaml`

### Step 0: Planning Phase
- Planner creates implementation plan
- Analyzes feature requirements
- Coordinates with relevant specialists
- Breaks down into steps
- Assigns agents
- Outputs: `plan-{{workflow_id}}.md`, `plan-{{workflow_id}}.json`


### Step 0.1: Plan Rating Gate
- Agent: orchestrator
- Type: validation
- Skill: response-rater
- Validates plan quality (minimum score: 7/10)
- Rubric: completeness, feasibility, risk mitigation, agent coverage, integration
- If score < 7: Return to Planner with feedback
- If score >= 7: Proceed to execution
- Records rating in `.claude/context/runs/<run_id>/plans/<plan_id>-rating.json`

### Step 1: Implementation
- Developer implements feature
- Follows plan steps
- Creates code artifacts

### Step 2: Testing
- Developer writes tests
- QA validates quality
- Ensures coverage

### Step 3: Documentation
- Technical Writer documents feature
- Creates usage examples
- Updates guides

## Agents Used
- Planner -> Developer -> QA -> Technical Writer

## Skills Used
- `plan-generator` - Implementation plan
- `scaffolder` - Code generation
- `test-generator` - Test creation
- `doc-generator` - Documentation
- `response-rater` - Plan quality validation

## Expected Outputs
- Feature implementation
- Test suite
- Documentation
- Usage examples

## Success Criteria
- [ ] Plan created (artifact: `plan-{{workflow_id}}.json`, validated by gate file: `gates/00-planner.json`)
- [ ] Plan rating >= 7/10 (recorded in `.claude/context/runs/<run_id>/plans/<plan_id>-rating.json`)
- [ ] Rating recorded in run state (validation: rating file exists)
- [ ] Feature implemented (artifact: `dev-manifest-{{workflow_id}}.json`, files array populated)
- [ ] Code passes linting (validation: lint exit code 0)
- [ ] Tests written (artifact: `test-files-{{workflow_id}}.json`, test files listed)
- [ ] Tests passing (artifact: `test-results-{{workflow_id}}.json`, all tests status: passed)
- [ ] Test coverage adequate (artifact: `test-results-{{workflow_id}}.json`, coverage >= 80%)
- [ ] QA validation passed (validated by gate file: `gates/qa.json`, status: passed)
- [ ] Documentation complete (artifact: `feature-docs-{{workflow_id}}.md`, rendered from JSON)
- [ ] Usage examples included (artifact: `feature-docs-{{workflow_id}}.md`, examples section populated)

## Example Prompts
```
"Implement user authentication with JWT"
"Build a task management feature"
"Add payment processing"
```

## Related Documentation
- [Developer Agent](../../agents/developer.md)
- [greenfield-fullstack Workflow](../../workflows/greenfield-fullstack.yaml)
