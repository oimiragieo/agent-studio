# CUJ-007: Technical Debt Planning

## User Goal
Plan refactoring of legacy code and technical debt.

## Trigger
- "Plan refactoring of legacy code"
- "Technical debt planning"
- "Refactoring plan"

## Workflow

**Execution Mode**: `skill-only`

### Step 1: Planning
- Planner creates refactoring plan
- Analyzes scope and impact

### Step 2: Code Analysis
- Refactoring Specialist analyzes code
- Identifies technical debt
- Assesses refactoring impact

### Step 3: Refactoring Plan
- Creates detailed refactoring plan
- Prioritizes debt items
- Defines migration strategy

### Step 4: Validation
- Validates plan feasibility
- Checks dependencies
- Estimates effort

## Agents Used
- Planner -> Refactoring Specialist

## Skills Used
- `plan-generator` - Refactoring plan

## Expected Outputs
- Refactoring plan
- Technical debt inventory
- Migration roadmap

## Success Criteria
- [ ] Plan created (artifact: `plan-{{workflow_id}}.json`, validated by gate file)
- [ ] Technical debt inventory complete (artifact: `refactor-plan-{{workflow_id}}.json`, debt_items array populated)
- [ ] Debt items prioritized (artifact: `refactor-plan-{{workflow_id}}.json`, each item has priority: high|medium|low)
- [ ] Effort estimates provided (artifact: `refactor-plan-{{workflow_id}}.json`, each item has effort_hours field)
- [ ] Dependencies mapped (artifact: `refactor-plan-{{workflow_id}}.json`, dependencies array populated)
- [ ] Migration strategy defined (artifact: `refactor-plan-{{workflow_id}}.json`, migration_strategy object populated)
- [ ] Risk assessment complete (artifact: `refactor-plan-{{workflow_id}}.json`, risks array with probability and impact)
- [ ] Report validated (schema: `.claude/schemas/refactoring-plan.schema.json`)

## Example Prompts
```
"Plan refactoring of the authentication module"
"Create a technical debt reduction plan"
"Plan migration from legacy code"
```

## Related Documentation
- [Refactoring Specialist Agent](../../agents/refactoring-specialist.md)
- [plan-generator Skill](../../skills/plan-generator/SKILL.md)
