# CUJ-024: Incident Response

## User Goal
Respond to production incidents effectively.

## Trigger
- `/incident`
- "Production incident"
- "System outage"

## Workflow

**Execution Mode**: `incident-flow.yaml`

### Step 0: Planning Phase
- Planner creates incident response plan
- Analyzes incident scope and urgency
- Coordinates with Incident Responder for response strategy
- Defines response priorities and escalation path
- Outputs: `plan-{{workflow_id}}.md`, `plan-{{workflow_id}}.json`
- Note: For urgent incidents, this step may be abbreviated or skipped


### Step 0.1: Plan Rating Gate
- Agent: orchestrator
- Type: validation
- Skill: response-rater
- Validates plan quality (minimum score: 7/10)
- Rubric: completeness, feasibility, risk mitigation, agent coverage, integration
- If score < 7: Return to Planner with feedback
- If score >= 7: Proceed to execution
- Records rating in `.claude/context/runs/<run_id>/plans/<plan_id>-rating.json`

### Step 1: Incident Analysis
- Incident Responder analyzes crisis
- Identifies root cause
- Assesses impact

### Step 2: Resolution
- DevOps implements fixes
- Applies hotfixes
- Restores service

### Step 3: Security Review
- Security Architect reviews
- Checks security implications
- Validates fixes

### Step 4: Validation
- QA validates resolution
- Confirms service restored
- Documents incident

## Agents Used
- Incident Responder → DevOps → Security Architect → QA

## Skills Used
- `recovery` - Incident recovery protocol
- `response-rater` - Plan quality validation

## Capabilities/Tools Used
- Incident management tools (platform-specific incident tracking systems)

## Expected Outputs
- Incident report
- Root cause analysis
- Post-mortem document
- Remediation plan

## Success Criteria
- ✅ Incident resolved
- [ ] Plan rating >= 7/10 (recorded in `.claude/context/runs/<run_id>/plans/<plan_id>-rating.json`)
- [ ] Rating recorded in run state (validation: rating file exists)
- ✅ Root cause identified
- ✅ Post-mortem created
- ✅ Prevention measures planned

## Example Prompts
```
/incident
"Production database outage"
"Security incident response"
```

