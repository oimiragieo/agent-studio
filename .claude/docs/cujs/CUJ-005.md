# CUJ-005: Greenfield Project Planning

## User Goal
Plan and execute a complete new project from scratch.

## Trigger
- "Build a new e-commerce platform"
- "Create new project"
- "Greenfield project"

## Workflow

**Execution Mode**: `greenfield-fullstack.yaml`

### Step 0: Planning Phase
- Planner creates comprehensive project plan
- Coordinates with all specialists
- Validates plan completeness


### Step 0.1: Plan Rating Gate
- Agent: orchestrator
- Type: validation
- Skill: response-rater
- Validates plan quality (minimum score: 7/10)
- Rubric: completeness, feasibility, risk mitigation, agent coverage, integration
- If score < 7: Return to Planner with feedback
- If score >= 7: Proceed to execution
- Records rating in `.claude/context/runs/<run_id>/plans/<plan_id>-rating.json`

### Step 1: Project Discovery
- Analyst creates project brief
- Market research and competitive analysis
- Feasibility study

### Step 2: Product Requirements
- PM creates PRD
- User stories and acceptance criteria
- Feature prioritization

### Step 3: UX Design
- UX Expert designs interface
- User flows and wireframes
- Accessibility considerations

### Step 4: System Architecture
- Architect designs system
- Technology selection
- Integration patterns

### Step 5: Database Architecture
- Database Architect designs schema
- Data modeling
- Migration strategy

### Step 6: Test Planning
- QA creates test plan
- Test strategy
- Quality gates

### Step 7: Implementation
- Developer implements features
- Follows plan steps
- Creates code artifacts

### Step 8: Documentation
- Technical Writer documents system
- API documentation
- User guides

### Step 9: Quality Validation
- QA validates quality gates
- Final testing
- Acceptance validation

### Step 9.5: Publish Artifacts
- **Agent**: orchestrator
- **Skill**: artifact-publisher
- **Condition**: validation_status == 'pass'
- **Policy**: auto-on-pass
- **Description**: Publish all validated artifacts to project feed for cross-platform visibility
- **Output**: Published artifacts with sharing links

## Agents Used
- Planner -> Analyst -> PM -> UX Expert -> Architect -> Database Architect -> QA -> Developer -> Technical Writer -> QA

## Skills Used
- `plan-generator` - Project planning
- `scaffolder` - Code generation
- `rule-auditor` - Code validation
- `doc-generator` - Documentation
- `response-rater` - Plan quality validation

## Expected Outputs
- Project brief
- PRD
- UX specifications
- Architecture documents
- Database schema
- Test plan
- Implementation code
- Documentation

## Success Criteria
- [ ] Plan created (artifact: `plan-{{workflow_id}}.json`, validated by gate file: `gates/00-planner.json`)
- [ ] Plan rating >= 7/10 (recorded in `.claude/context/runs/<run_id>/plans/<plan_id>-rating.json`)
- [ ] Rating recorded in run state (validation: rating file exists)
- [ ] Project brief complete (artifact: `project-brief-{{workflow_id}}.json`, schema: `.claude/schemas/project_brief.schema.json`)
- [ ] PRD complete (artifact: `prd-{{workflow_id}}.json`, validated by gate file: `gates/02-pm.json`)
- [ ] UX specifications complete (artifact: `ui-spec-{{workflow_id}}.json`, validated by gate file)
- [ ] Architecture documented (artifact: `architecture-{{workflow_id}}.json`, schema: `.claude/schemas/system_architecture.schema.json`)
- [ ] Database schema designed (artifact: `db-schema-{{workflow_id}}.json`, validated by gate file)
- [ ] Test plan created (artifact: `test-plan-{{workflow_id}}.json`, schema: `.claude/schemas/test_plan.schema.json`)
- [ ] Implementation complete (artifact: `dev-manifest-{{workflow_id}}.json`, validated by QA gate)
- [ ] Documentation complete (artifact: `docs-{{workflow_id}}.md`, rendered from JSON)
- [ ] All quality gates passed (all gate files in `gates/` show `status: "passed"`)

## Example Prompts
```
"Build a new task management application"
"Create a new e-commerce platform from scratch"
"Greenfield project: social media app"
```

## Related Documentation
- [greenfield-fullstack Workflow](../../workflows/greenfield-fullstack.yaml)
- [Planner Agent](../../agents/planner.md)
