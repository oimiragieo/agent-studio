{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Product Requirements Document",
  "type": "object",
  "required": ["prd_id", "title", "version", "requirements"],
  "properties": {
    "prd_id": {
      "type": "string",
      "description": "Unique identifier for the PRD"
    },
    "title": {
      "type": "string",
      "description": "Title of the product or feature"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version number"
    },
    "author": {
      "type": "string",
      "description": "Name or identifier of the PRD author"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of PRD creation"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    },
    "status": {
      "enum": ["draft", "review", "approved", "implemented", "deprecated"],
      "description": "Current status of the PRD"
    },
    "overview": {
      "type": "string",
      "description": "High-level overview of the product or feature"
    },
    "objectives": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Business objectives this PRD addresses"
    },
    "requirements": {
      "type": "array",
      "description": "List of product requirements",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "description", "priority"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the requirement"
          },
          "description": {
            "type": "string",
            "description": "Detailed description of the requirement"
          },
          "priority": {
            "enum": ["must-have", "should-have", "could-have", "wont-have"],
            "description": "MoSCoW priority level"
          },
          "acceptance_criteria": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Criteria that must be met for requirement completion"
          },
          "user_story": {
            "type": "string",
            "description": "User story format: As a [user], I want [goal], so that [benefit]"
          },
          "dependencies": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs of other requirements this depends on"
          },
          "estimated_effort": {
            "type": "string",
            "description": "Estimated effort (e.g., 'small', 'medium', 'large')"
          }
        }
      }
    },
    "non_functional_requirements": {
      "type": "object",
      "properties": {
        "performance": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "security": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "scalability": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "accessibility": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "success_metrics": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "metric": {
            "type": "string"
          },
          "target": {
            "type": "string"
          },
          "measurement_method": {
            "type": "string"
          }
        }
      }
    },
    "assumptions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assumptions made in this PRD"
    },
    "constraints": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Known constraints or limitations"
    },
    "risks": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "risk": {
            "type": "string"
          },
          "impact": {
            "enum": ["low", "medium", "high", "critical"]
          },
          "mitigation": {
            "type": "string"
          }
        }
      }
    }
  }
}
