{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Plan Mode Handoff",
  "description": "Schema for handoff package from Planner Agent to Cursor Plan Mode",
  "required": ["handoff_id", "created_at", "strategic_plan_path", "plan_summary", "workflow_id"],
  "properties": {
    "handoff_id": {
      "type": "string",
      "description": "Unique identifier for the handoff package"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when handoff was created"
    },
    "strategic_plan_path": {
      "type": "string",
      "description": "Path to strategic plan JSON file (e.g., .claude/context/artifacts/plan-{workflow_id}.json)"
    },
    "strategic_plan_markdown_path": {
      "type": "string",
      "description": "Path to strategic plan markdown file (e.g., .claude/context/artifacts/plan-{workflow_id}.md)"
    },
    "plan_summary": {
      "type": "string",
      "description": "Brief summary of strategic plan for Plan Mode description"
    },
    "workflow_id": {
      "type": "string",
      "description": "Workflow ID for traceability"
    },
    "plan_mode_ready": {
      "type": "boolean",
      "description": "Flag indicating the plan is ready for Plan Mode handoff",
      "default": true
    },
    "cursor_workspace_path": {
      "type": "string",
      "description": "Path to Cursor workspace (optional, defaults to current directory)"
    },
    "plan_mode_config": {
      "type": "object",
      "description": "Configuration for Cursor Plan Mode",
      "properties": {
        "description": {
          "type": "string",
          "description": "Plan description for Plan Mode"
        },
        "context_references": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Files/directories to reference for context"
        },
        "implementation_scope": {
          "type": "string",
          "description": "Scope of implementation for Plan Mode"
        }
      }
    },
    "handoff_metadata": {
      "type": "object",
      "description": "Metadata about the handoff",
      "properties": {
        "source_agent": {
          "type": "string",
          "description": "Agent creating the handoff",
          "default": "planner"
        },
        "target_platform": {
          "type": "string",
          "description": "Target platform (e.g., 'cursor-plan-mode')",
          "default": "cursor-plan-mode"
        },
        "handoff_version": {
          "type": "string",
          "description": "Version of handoff schema"
        }
      }
    },
    "traceability": {
      "type": "object",
      "description": "Traceability information for linking plans",
      "properties": {
        "strategic_plan_id": {
          "type": "string",
          "description": "Strategic plan ID from plan.schema.json"
        },
        "implementation_plan_location": {
          "type": "string",
          "description": "Expected location of implementation plan (e.g., .cursor/plans/plan-{workflow_id}.json)"
        }
      }
    }
  }
}
