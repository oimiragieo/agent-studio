{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://llm-rules.com/schemas/cuj-registry.schema.json",
  "title": "CUJ Registry Schema",
  "description": "Schema for Customer User Journey (CUJ) registry - single source of truth for all CUJs",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Registry version (semantic versioning)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "generated": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when registry was generated"
    },
    "total_cujs": {
      "type": "integer",
      "description": "Total number of CUJs in registry",
      "minimum": 0
    },
    "cujs": {
      "type": "array",
      "description": "List of all Customer User Journeys",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^CUJ-[0-9]{3}$",
            "description": "Unique CUJ identifier (e.g., CUJ-001)"
          },
          "name": {
            "type": "string",
            "description": "Human-readable CUJ name"
          },
          "description": {
            "type": "string",
            "description": "Brief description of the CUJ goal"
          },
          "category": {
            "type": "string",
            "enum": [
              "Onboarding & Setup",
              "Planning & Architecture",
              "Development",
              "Quality Assurance",
              "Documentation",
              "Specialized Workflows",
              "Maintenance & Operations",
              "Advanced Workflows",
              "Testing & Validation"
            ],
            "description": "CUJ category for organization"
          },
          "execution_mode": {
            "type": "string",
            "enum": [
              "workflow",
              "skill-only",
              "delegated-skill",
              "manual-setup"
            ],
            "description": "How the CUJ is executed (workflow, skill, or manual)"
          },
          "workflow": {
            "type": ["string", "null"],
            "description": "Path to workflow YAML file (null if skill-only or manual)"
          },
          "agents": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of agents used in this CUJ"
          },
          "skills": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of skills used in this CUJ"
          },
          "primary_skill": {
            "type": ["string", "null"],
            "description": "Primary skill for skill-only CUJs (null for workflows)"
          },
          "schemas": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of schemas used for validation"
          },
          "triggers": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "User triggers (slash commands, natural language phrases)"
          },
          "platform_compatibility": {
            "type": "object",
            "properties": {
              "claude": {
                "type": "boolean",
                "description": "Works on Claude Code"
              },
              "cursor": {
                "type": "boolean",
                "description": "Works on Cursor"
              },
              "factory": {
                "type": "boolean",
                "description": "Works on Factory Droid"
              }
            },
            "required": ["claude", "cursor", "factory"]
          },
          "expected_outputs": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Expected artifacts and outputs"
          },
          "estimated_duration": {
            "type": "string",
            "description": "Estimated execution time (e.g., '2-5 sec', '2-10 minutes')"
          },
          "file_path": {
            "type": "string",
            "description": "Path to CUJ documentation file"
          }
        },
        "required": [
          "id",
          "name",
          "execution_mode",
          "category",
          "agents",
          "skills",
          "platform_compatibility"
        ],
        "additionalProperties": false
      }
    }
  },
  "required": ["version", "generated", "total_cujs", "cujs"],
  "additionalProperties": false
}
