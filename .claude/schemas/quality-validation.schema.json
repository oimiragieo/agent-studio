{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Quality Validation",
  "description": "Schema for quality validation report from QA agent",
  "required": ["validation_id", "validation_date", "status", "coverage"],
  "properties": {
    "validation_id": {
      "type": "string",
      "description": "Unique identifier for the validation report"
    },
    "validation_date": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when validation was performed"
    },
    "validator_agent": {
      "type": "string",
      "description": "Agent that performed the validation (e.g., qa)"
    },
    "status": {
      "type": "string",
      "enum": ["pass", "fail", "warning"],
      "description": "Overall validation status"
    },
    "coverage": {
      "type": "object",
      "required": [
        "features_tested_percentage",
        "documentation_compared",
        "logs_analyzed",
        "performance_measured"
      ],
      "description": "Coverage metrics for testing",
      "properties": {
        "features_tested_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Percentage of documented features that were tested"
        },
        "documentation_compared": {
          "type": "boolean",
          "description": "Whether documentation comparison was completed"
        },
        "logs_analyzed": {
          "type": "boolean",
          "description": "Whether logs were analyzed"
        },
        "performance_measured": {
          "type": "boolean",
          "description": "Whether performance was measured (both initial load and per-feature)"
        },
        "total_features_documented": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of features documented"
        },
        "total_features_tested": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of features tested"
        },
        "critical_features_tested": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of critical features tested"
        },
        "total_critical_features": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of critical features"
        }
      }
    },
    "completeness_checks": {
      "type": "object",
      "description": "Completeness validation checks",
      "properties": {
        "all_critical_features_tested": {
          "type": "boolean",
          "description": "Whether all critical features were tested"
        },
        "bug_reports_complete": {
          "type": "boolean",
          "description": "Whether bug reports are complete and actionable"
        },
        "recommendations_prioritized": {
          "type": "boolean",
          "description": "Whether all recommendations are prioritized correctly"
        },
        "documentation_comparison_accurate": {
          "type": "boolean",
          "description": "Whether documentation comparison is accurate"
        },
        "performance_metrics_complete": {
          "type": "boolean",
          "description": "Whether performance metrics are complete (both initial load and per-feature)"
        },
        "log_analysis_complete": {
          "type": "boolean",
          "description": "Whether log analysis is complete with feature correlations"
        },
        "optimization_analyses_complete": {
          "type": "boolean",
          "description": "Whether UI and performance optimization analyses are complete"
        }
      }
    },
    "quality_scores": {
      "type": "object",
      "description": "Quality scores for different aspects",
      "properties": {
        "test_coverage_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Test coverage score (percentage)"
        },
        "documentation_accuracy_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Documentation accuracy score (from documentation comparison)"
        },
        "bug_report_quality_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Quality score for bug reports (completeness, actionability)"
        },
        "recommendation_quality_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Quality score for recommendations (prioritization, effort estimates)"
        },
        "overall_quality_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Overall quality score"
        }
      }
    },
    "issues": {
      "type": "array",
      "description": "Issues found during validation",
      "items": {
        "type": "object",
        "required": ["issue", "severity"],
        "properties": {
          "issue": {
            "type": "string",
            "description": "Description of the validation issue"
          },
          "severity": {
            "type": "string",
            "enum": ["low", "medium", "high", "critical"],
            "description": "Severity of the issue"
          },
          "category": {
            "type": "string",
            "enum": ["coverage", "completeness", "accuracy", "quality", "other"],
            "description": "Category of the issue"
          },
          "recommendation": {
            "type": "string",
            "description": "Recommendation to fix the issue"
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "browser_test_report_reference": {
          "type": "string",
          "description": "Reference to browser-test-report artifact validated"
        },
        "ui_test_results_reference": {
          "type": "string",
          "description": "Reference to ui-test-results artifact used for validation"
        },
        "plan_reference": {
          "type": "string",
          "description": "Reference to plan artifact used for validation"
        },
        "notes": {
          "type": "string",
          "description": "Additional notes about the validation"
        }
      }
    }
  }
}
