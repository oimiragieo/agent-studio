{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude.ai/schemas/settings.schema.json",
  "title": "Claude Settings Configuration",
  "description": "Schema for validating .claude/settings.json configuration file",
  "type": "object",
  "required": ["session", "models", "routing"],
  "properties": {
    "session": {
      "type": "object",
      "description": "Session-level configuration",
      "required": [
        "default_model",
        "default_temperature",
        "default_role",
        "router_enabled",
        "auto_route_to_orchestrator",
        "session_timeout_ms",
        "state_persistence"
      ],
      "properties": {
        "default_model": {
          "type": "string",
          "description": "Default Claude model ID",
          "pattern": "^claude-[a-z0-9-]+$",
          "examples": [
            "claude-3-5-haiku-20241022",
            "claude-sonnet-4-20250514",
            "claude-opus-4-20241113"
          ]
        },
        "default_temperature": {
          "type": "number",
          "description": "Default temperature for model responses",
          "minimum": 0,
          "maximum": 1,
          "default": 0.1
        },
        "default_role": {
          "type": "string",
          "description": "Default agent role",
          "enum": ["router", "orchestrator", "developer", "analyst"],
          "default": "router"
        },
        "router_enabled": {
          "type": "boolean",
          "description": "Enable intelligent routing",
          "default": true
        },
        "auto_route_to_orchestrator": {
          "type": "boolean",
          "description": "Automatically route complex tasks to orchestrator",
          "default": true
        },
        "session_timeout_ms": {
          "type": "integer",
          "description": "Session timeout in milliseconds",
          "minimum": 60000,
          "maximum": 86400000,
          "default": 3600000
        },
        "state_persistence": {
          "type": "boolean",
          "description": "Enable session state persistence",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "models": {
      "type": "object",
      "description": "Model assignments for different roles",
      "required": ["router", "orchestrator", "complex"],
      "properties": {
        "router": {
          "type": "string",
          "description": "Model ID for router role",
          "pattern": "^claude-[a-z0-9-]+$"
        },
        "orchestrator": {
          "type": "string",
          "description": "Model ID for orchestrator role",
          "pattern": "^claude-[a-z0-9-]+$"
        },
        "complex": {
          "type": "string",
          "description": "Model ID for complex tasks",
          "pattern": "^claude-[a-z0-9-]+$"
        }
      },
      "additionalProperties": {
        "type": "string",
        "pattern": "^claude-[a-z0-9-]+$"
      }
    },
    "routing": {
      "type": "object",
      "description": "Routing configuration",
      "required": [
        "complexity_threshold",
        "cost_optimization_enabled",
        "fallback_to_sonnet"
      ],
      "properties": {
        "complexity_threshold": {
          "type": "number",
          "description": "Threshold for routing to more capable models",
          "minimum": 0,
          "maximum": 1,
          "default": 0.7
        },
        "cost_optimization_enabled": {
          "type": "boolean",
          "description": "Enable cost optimization in routing decisions",
          "default": true
        },
        "fallback_to_sonnet": {
          "type": "boolean",
          "description": "Fallback to Sonnet if Haiku fails",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "backward_compatibility": {
      "type": "object",
      "description": "Backward compatibility settings",
      "required": ["legacy_routing_mode", "allow_direct_agent_calls"],
      "properties": {
        "legacy_routing_mode": {
          "type": "boolean",
          "description": "Enable legacy routing behavior",
          "default": false
        },
        "allow_direct_agent_calls": {
          "type": "boolean",
          "description": "Allow direct agent invocation bypassing router",
          "default": true
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
