{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "version": "2.0",
  "tool_permissions": {
    "always_allow": [
      "Read",
      "Search",
      "Edit",
      "Write",
      "Glob",
      "Grep",
      "Task",
      "MCPSearchTool",
      "Bash(node *)",
      "Bash(python *)",
      "Bash(npm *)",
      "Bash(pnpm *)",
      "Bash(yarn *)",
      "Bash(npx *)",
      "Bash(git *)",
      "Bash(ls *)",
      "Bash(cat *)",
      "Bash(head *)",
      "Bash(tail *)",
      "Bash(mkdir *)",
      "Bash(cp *)",
      "Bash(mv *)",
      "Bash(find *)",
      "Bash(grep *)",
      "Bash(for *)",
      "Bash(echo *)",
      "Bash(cd *)",
      "Bash(pwd)",
      "Bash(which *)",
      "Bash(where *)",
      "Bash(test *)",
      "Bash([ *)",
      "Bash(curl *)",
      "Bash(wget *)"
    ],
    "require_confirmation": [],
    "always_deny": [
      "Bash(rm -rf /)",
      "Bash(rm -rf ~)",
      "Bash(rm -rf *)",
      "Bash(sudo rm *)",
      "Bash(format *)",
      "Bash(dd if=*)",
      "Bash(mkfs *)",
      "Bash(shutdown *)",
      "Bash(reboot *)",
      "Bash(init 0)",
      "Bash(init 6)"
    ]
  },
  "bash_commands": {
    "safe_patterns": [
      "npm run *",
      "pnpm *",
      "yarn *",
      "python *",
      "node *",
      "npx *",
      "git *",
      "npm test",
      "npm run lint",
      "npm run typecheck"
    ],
    "require_confirmation": [],
    "blocked_patterns": ["rm -rf /", "rm -rf ~", "sudo rm", "format *", "dd if=", "mkfs *"]
  },
  "session": {
    "auto_save": true,
    "context_file": ".claude/context/session.json",
    "max_context_tokens": 60000,
    "default_model": "claude-haiku-4-5",
    "default_temperature": 0.1,
    "default_role": "router",
    "router_enabled": true,
    "auto_route_to_orchestrator": true,
    "session_timeout_ms": 3600000,
    "state_persistence": true
  },
  "models": {
    "router": "claude-haiku-4-5",
    "orchestrator": "claude-sonnet-4-5",
    "complex": "claude-opus-4-5-20251101"
  },
  "routing": {
    "complexity_threshold": 0.7,
    "cost_optimization_enabled": true,
    "fallback_to_sonnet": true
  },
  "backward_compatibility": {
    "legacy_routing_mode": false,
    "allow_direct_agent_calls": true
  },
  "rules": {
    "exclude_patterns": [".claude/archive/**"],
    "archive_access": "on_demand"
  },
  "agent_config": {
    "agent_directory": ".claude/agents"
  },
  "extended_thinking": {
    "enabled": false,
    "use_for_agents": [
      "orchestrator",
      "architect",
      "database-architect",
      "qa",
      "security-architect",
      "llm-architect",
      "code-reviewer",
      "performance-engineer",
      "api-designer",
      "legacy-modernizer",
      "compliance-auditor",
      "refactoring-specialist"
    ]
  },
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/session-start.mjs"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/run-observer.mjs pre"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/no-reroute-after-routing.mjs"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/routing-handoff-target-guard.mjs"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/headless-task-guard.mjs"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/task-concurrency-guard.mjs"
          }
        ]
      },
      {
        "matcher": "Glob",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/router-glob-guard.mjs"
          }
        ]
      },
      {
        "matcher": "Write|Edit|Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/read-only-enforcer.mjs"
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/master-orchestrator-read-guard.mjs"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/read-path-guard.mjs"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/read-size-guard.mjs"
          }
        ]
      },
      {
        "matcher": "Grep|Glob|Search",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/routing-safety-guard.mjs"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/orchestrator-tool-guard.mjs"
          }
        ]
      },
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/router-first-enforcer.mjs"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/run-observer.mjs post"
          }
        ]
      },
      {
        "matcher": "Task|router",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/router-completion-handler.mjs"
          }
        ]
      },
      {
        "matcher": "Bash|Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/post-delegation-verifier.mjs"
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/run-observer.mjs subagent-start"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/subagent-activity-tracker.mjs start"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/run-observer.mjs subagent-stop"
          },
          {
            "type": "command",
            "command": "node .claude/hooks/subagent-activity-tracker.mjs stop"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/idle-heartbeat.mjs"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/run-observer.mjs stop"
          }
        ]
      }
    ]
  },
  "memory": {
    "rag": {
      "enabled": true,
      "model": "text-embedding-3-small",
      "dimensions": 1536,
      "batchSize": 100,
      "cacheEnabled": true,
      "indexPath": ".claude/context/memory/vectors.hnsw",
      "backgroundIndexing": true,
      "indexInterval": 60000,
      "semanticSearchWeight": 0.4,
      "ftsSearchWeight": 0.6,
      "minRelevance": 0.7
    }
  },
  "statusLine": {
    "type": "command",
    "command": "node .claude/hooks/statusline.mjs"
  },
  "env": {
    "ENABLE_TOOL_SEARCH": "auto:5"
  }
}
